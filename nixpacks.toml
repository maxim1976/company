[phases.setup]
nixPkgs = ["python312", "postgresql"]

[phases.install]
cmds = ["curl -LsSf https://astral.sh/uv/install.sh | sh", "export PATH=\"$HOME/.local/bin:$PATH\" && uv sync --frozen --no-dev"]

[start]
cmd = "cd backend && /opt/venv/bin/python manage.py migrate && /opt/venv/bin/python manage.py collectstatic --noinput && /opt/venv/bin/gunicorn core.wsgi --bind 0.0.0.0:$PORT"
